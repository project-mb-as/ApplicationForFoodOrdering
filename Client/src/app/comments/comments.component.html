<mat-expansion-panel [expanded]="false" (opened)="onOpen()" class="flex">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <h4>Komentari</h4>
    </mat-panel-title>
    <mat-panel-description class="pt-1">
      {{food.numberOfComments ? food.numberOfComments: 0}}
    </mat-panel-description>
  </mat-expansion-panel-header>
  <div fxLayout="column">
    <div [formGroup]="commentForm" fxLayout="column" fxLayoutAlign="space-around start">

      <img *ngIf="imgResultAfterCompress" [src]="imgResultAfterCompress" alt="">
      <mat-form-field style="width:100%">
        <mat-label>Komentar</mat-label>
        <input formControlName="comment" matInput>
      </mat-form-field>
      <div fxLayout="row">
        <button class="btn btn-success" (click)="compressFile()">
          Dodaj sliku
        </button>
        <button class="btn btn-primary ml-1" (click)="onSubmit()">
          Snimi
        </button>
      </div>
    </div>

    <span *ngIf="loading" class="spinner-border spinner-border-sm m-2"></span>
    <div fxFlex="100%" *ngIf="comments">

      <div class="card" *ngFor="let comment of comments">
        <div class="card-header" fxLayout="row" fxLayoutAlign="space-between center">
          <div fxFlex="50%"><b>{{formatTime(comment.time)}}</b></div>
          <div fxFlex="50%">{{comment.user}}</div>
        </div>
        <div class="card-body">
          <img style="max-height:300px; max-width:300px;" *ngIf="comment.image" src="{{imagesUrl}}{{comment.image}}" alt="">
          {{comment.content}}
        </div>
      </div>
    </div>
  </div>
</mat-expansion-panel>
